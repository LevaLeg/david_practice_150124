## Итоговое занятие №12

### Тема: JavaScript. Асинхронные операции. Основы ООП.
Репозитарий содержит материалы по итоговому занятию №12, посвященному работе с ООП.

### Цели занятия
- закрепление знаний, полученных на лекциях;
- практическое применение знаний, полученных на лекциях.

### Задачи занятия

Сегодня реализуем программное обеспечение для кофемашины. Она умеет делать несколько рецептов кофе из определенных ингредиентов (вода, зерна, молоко). Приготовление кофе в нашем случае заключается в смешивании ингредиентов в определенных пропорциях по весу.

1. Реализуем класс `CoffeeRecipe`, который хранит в себе данные о рецепте кофе (то есть о соотношении ингредиентов). В конструкторе, он принимает название рецепта, и пропорции ингредиентов - от 1 до 3 чисел. Первое - это доля воды, второе - доля зерен, и третье - доля молока. Нужно реализовать в конструкторе контроль того, что соотношение пропорций в сумме равно 1 (т.е доля воды + доля зерен + доля молока = 1).
2. Сделаем свойство-геттер `description`, которое позволит получить описание рецепта. Его задача - вернуть строку вида `Recipe ...: water: ..., beans: ..., milk: ...`
3. Сделаем свойства сеттеры для воды, молока и зерен - нужно чтобы при изменении этих свойств сумма долей равнялась 1.
4. Теперь сделаем программное обеспечение для самой кофемашины. У кофемашины есть модель (строка), и объемы отсеков для воды, зерен и молока (числа). Это мы будем передавать в конструкторе. Для хранения, используем свойства `waterLimit`, `beansLimit`, `milkLimit`. Нам понадобится остлеживать состояние кофемашины, т.е. сколько у нас молока, воды и кофе соответственно. Реализуем это через свойства `water`, `beans`, `milk`.
5. Все кофемашины нашего производства имеют общий список рецептов (массив объектов `CoffeeRecipe`). Список рецептов берем такой:
```
const espresso = new CoffeeRecipe('espresso', 0.6, 0.4, 0);
const americano = new CoffeeRecipe('americano', 0.8, 0.2, 0);
const latte = new CoffeeRecipe('latte', 0.4, 0.2, 0.4);
const cappuccino = new CoffeeRecipe('cappuccino', 0.3, 0.2, 0.5);
```

6. Реализуем загрузку ингредиентов. Сделаем это с использованием свойств-сеттеров, `waterStorage`, `beansStorage`, `milkStorage`. При этом, нужно контролировать, чтобы загрузка не превышала объемы отсеков.
7. Теперь осталось реализовать приготовление кофе. Реализуем метод `makeCoffee`, который будет принимать в аргументе название кофе. Он будет возвращать объект, у которого будет свойство с названием напитка. Но при этом, нужно контролировать, что:
 - кофемашина умеет делать такой напиток - т.е. такой кофе есть в списке рецептов.
 - что у нас достаточно ингредиентов для приготовления кофе.
 - если эти условия выполняются - то мы готовим кофе, и уменьшаем кол-во ингредиентов в кофемашине.

Наше ПО оказалось востребованным на рынке, и мы решили его адаптировать под кофе-автоматы. То есть, нам нужно "расширенное" ПО, которое кроме приготовления кофе, еще и умеет работать с деньгами. Нужно чтобы автомат отслеживал количество и сумму вброшенных монет, и при этом имел конечный список номиналов монет, общий для всех автоматов. Прикинем, как мы будем это реализовывать. Задача к обсуждению.

8. Реализуем ПО для кофейного автомата, по мотивам обсуждения выше. Пока что добавляем функциональность по работе с деньгами, т.е. в объекте автомата мы будем хранить сумму брошенных монет, и у нас будет общий для всех автоматов массив с номиналами монет.
9. Реализуем метод `addCoin`. В аргументе, он принимает номинал монеты. Нужно проверить, что монета нам знакома, и если да - добавить ее номинал к текущей сумме.
10. Теперь пришла пора добавить функциональность по работе с деньгами. Наш автомат должен давать нам метод `setCoffeePrice`, который будет принимать в аргументах название напитка и цену. И нужно как-то сохранить это в автомате. Задача также к обсуждению.
11. Реализуем метод `buyCoffee` - он должен готовить нам напиток, и при этом контролировать, что клиент внес достаточно средств.