## Итоговое занятие №9

### Тема: JavaScript. Асинхронные операции.
Репозитарий содержит материалы по итоговому занятию №9, посвященному работе с асинхронными операциями в JavaScript.

### Цели занятия
- закрепление знаний, полученных на лекциях;
- практическое применение знаний, полученных на лекциях.

### Разогрев
1. Что выведет код?
```
console.log('start');

const promise1 = new Promise((resolve, reject) => {
  console.log(1)
  resolve(2)
})

promise1.then(res => {
  console.log(res)
})

console.log('end');
```

2. Что выведет код?
```
console.log('start');

const promise1 = new Promise((resolve, reject) => {
  console.log(1)
  resolve(2)
  console.log(3)
})

promise1.then(res => {
  console.log(res)
})

console.log('end');
```

3. Что выведет код?
```
console.log('start');

const promise1 = new Promise((resolve, reject) => {
  console.log(1)
})

promise1.then(res => {
  console.log(2)
})

console.log('end');
```

4. Что выведет код?
```
console.log('start')

const fn = () => (new Promise((resolve, reject) => {
  console.log(1);
  resolve('success')
}))

console.log('middle')

fn().then(res => {
  console.log(res)
})

console.log('end')
```

### Задачи занятия

Разбираемся с еще одной асинхронной операцией, `setInterval`. Она очень похожа на setTimeout, различие заключается в том, что таймаут выполняется один раз, через заданный промежуток времени. А интервал выполняется постоянно, через заданный промежуток времени.

Пример:
```
setInterval( () => {
  console.log('Tick');
}, 1000);
```

Фрагмент кода выше, создает интервал, который будет выводить в консоль слово `Tick` с интервалом в одну секунду (1000 миллисекунд).

Где используются интервалы - периодические действия (например, регулярная отправка запроса на сервер для уведомления, что сессию еще рано закрывать).

Точно так же, как и таймаут, интервал можно (и нужно!) отменять, если он больше не нужен.

```
const intervalId = setInterval( () => {
  console.log('Tick');
}, 1000);

// Очищаем интервал через 5 секунд
setTimeout( () => {
  clearInterval(intervalId);
}, 5000);
```

Задачи:
1. Задача - каждые 5 секунд выводить в консоль сообщение "Прошло 5 секунд".
2. Добавляем на страницу текущие дату и время. Нужно добавить в разметку блок, в котором должны отображаться текущие дата и время, вида `01.01.2000 11:23:55`. Для получения даты в таком формате, используем конструкцию `new Date().toLocaleString()`. И нужно сделать так, чтобы дата и время отображались актуальные (т.е. обновлять текст ежесекундно).
3. Реализуем простой секундомер. Нужно добавить в блок с id=`simpleTimerContainer` секундомер. В блоке будут:
 - параграф, в котором будем выводить текущее время секундомера
 - кнопка "Старт" - при нажатии запускаем секундомер
 - кнопка "Сброс" - при нажатии сбрасываем секундомер.
4. Усложняем наш секундомер. Нам нужно добавить кнопки "Пауза", "Возобновить". Первая будет приостанавливать, но не сбрасывать секундомер, а вторая - возобновлять его работу.
5. Написать функцию `delayedExecution`. Она должна принимать 2 аргумента. Первый - время задержки. Второй - функция-колбэк. Нужно, чтобы колбэк был вызван через время задержки. Пример:
```
const simpleFunction = () => { console.log('Hey there!'); }

delayedExecution(5, simpleFunction);
// Через 5 секунд в консоли будет выведено Hey there
```

6. Написать промис, который будет завершен успехом через 3 секунды.
7. Написать функцию `createPromise`, которая будет "производить" промисы. Она будет принимать в аргументах время задержки и функцию-колбэк. Задачей функции будет вернуть промис, который будет успешно завершен через время задержки результатом вызова функции-колбэка.
8. Пишем свой "гоночный симулятор". У нас есть массив гонщиков, `racers`. И есть массив победителей, `winners`. Нашей первой задачей будет написать функцию `startRace`. В аргументах она будет принимать объект с данными гонщика. Она должна случайным образом определить время заезда (Math.random), домножить это время на 1000, и через это время завершить заезд. Задача к обсуждению.
9. Далее, осталось написать функцию завершения заезда, `finishRace`. Она также примет в аргументах гонщика, и ее задача - проверить, если в массиве победителей уже есть 3 победителя, то вывести в консоль сообщение вида "Гонщик ИМЯ слишком медленный". Если же там еще нет трех победителей - вывести в консоль сообщение вида "Гонщик ИМЯ финишировал!", и добавить гонщика в массив победителей.
10. И нужно написать функцию `startCompetition`, которая запустит заезд для всех гонщиков.
